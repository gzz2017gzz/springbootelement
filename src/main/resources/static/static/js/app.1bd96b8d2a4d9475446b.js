webpackJsonp([1],{"1RTu":function(e,t){},AGk4:function(e,t){},EHB6:function(e,t){},FP0y:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("7+uW"),a={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]},i=n("VU/8")(null,a,!1,null,null,null).exports,l=n("/ocq"),s=n("bOdI"),c=n.n(s),u=(o={components:{},data:function(){return{menus:[]}}},c()(o,"components",{}),c()(o,"created",function(){var e=this;e.$http.post("/api/adminFunc/queryList",{}).then(function(t){e.menus=t.data})}),o),d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{style:{boxShadow:"0 2px 3px 2px rgba(0,0,0,.2)"}},[e._v("\n    你好张三,欢迎你使用!!\n  ")]),e._v(" "),n("el-container",[n("el-aside",{staticStyle:{"background-color":"#545c64",overflow:"visible"},style:{minHeight:"calc(100vh - 77px)"},attrs:{width:"199px"}},[n("el-aside",{attrs:{width:"200px"}},[n("el-col",{attrs:{span:24}},[n("el-row",{staticClass:"tac"},[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b",router:""}},e._l(e.menus,function(t){return n("el-submenu",{key:t.func_id,attrs:{index:t.func_id+"",title:t.tip}},[n("template",{slot:"title"},[n("i",{class:t.icon}),e._v(e._s(t.name))]),e._v(" "),e._l(t.children,function(t){return n("el-menu-item",{key:t.id,attrs:{index:t.url,title:t.tip}},[e._v(e._s(t.name))])})],2)}))],1)],1)],1)],1),e._v(" "),n("el-container",[n("el-main",[n("router-view")],1),e._v(" "),n("el-footer",[e._v("Footer")])],1)],1)],1)},staticRenderFns:[]},m=n("VU/8")(u,d,!1,null,null,null).exports,f=n("zL8q"),p=n.n(f),h=n("mvHQ"),v=n.n(h),_=n("Dd8w"),g=n.n(_);var b=[{id:1,name:"男"},{id:2,name:"女"}],x={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"400px",overflow:"auto"}},[n("hr"),e._v(" "),n("el-tree",{attrs:{data:e.menus,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},on:{"node-click":e.selectDept},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var o=t.data;return n("span",{staticClass:"custom-tree-node"},[n("el-radio-group",{model:{value:e.department_id,callback:function(t){e.department_id=t},expression:"department_id"}},[n("el-radio",{attrs:{label:o.dept_id,"v-model":o.dept_id}},[e._v(" "+e._s(o.name))])],1)],1)}}])})],1)},staticRenderFns:[]};var w={props:["refresh"],data:function(){return{title:"",form:this.initForm(),showSearchBox:!1,dialogMode:"save",show:!1,rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:8,message:"姓名长度2到8个字符",trigger:"blur"}],department_id:[{required:!0,message:"请选择部门",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{min:11,max:11,message:"手机号长度不正确",trigger:"blur"}]}}},computed:{genders:function(){return b}},methods:{save:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$http.post("/api/adminSysUser/validatePhone",v()({user_id:e.form.user_id,phone_eq:e.form.phone})).then(function(t){!0===t.data.success?e.$http.post("/api/adminSysUser/"+e.dialogMode,v()(e.form)).then(function(t){e.show=!1,e.$message.success(e.title+"成功!"),e.refresh()}):1===t.data.code&&e.$message.error("手机号码不能重复!")})})},initForm:function(){return{user_id:null,name:null,code:null,phone:null,gender:1,status:1,department_id:null,wechat:null,remark:null,dept_name:null}},addDialog:function(){this.title="新增用户",this.dialogMode="save",this.form=this.initForm(),this.show=!0},editDialog:function(e){this.title="修改用户",this.dialogMode="update",this.form=g()({},e),this.form.headName=e.dept_name,this.show=!0},selectDept:function(e){this.showSearchBox=!1,this.form=g()({},this.form,{department_id:e.dept_id,dept_name:e.name})},setPopoverDeptId:function(){this.$refs.PopoverDialog.setDeptId(this.form.department_id)}},components:{AdminDeptTreeDialog:n("VU/8")({props:["selectDept"],data:function(){return{menus:[],department_id:null}},created:function(){this.refresh()},methods:{refresh:function(){var e=this;e.$http.post("/api/adminDept/queryList",{}).then(function(t){e.menus=t.data})},setDeptId:function(e){this.department_id=e}}},x,!1,function(e){n("gvT3")},null,null).exports}},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,visible:e.show,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"800px"},on:{"update:visible":function(t){e.show=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"姓名",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[n("el-input",{attrs:{placeholder:"请输入手机号",maxlength:"11"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"部门",prop:"dept_name"}},[n("el-popover",{ref:"deptPopover",attrs:{placement:"right",title:"请选择部门",width:"400",trigger:"click"},on:{show:e.setPopoverDeptId},model:{value:e.showSearchBox,callback:function(t){e.showSearchBox=t},expression:"showSearchBox"}},[n("AdminDeptTreeDialog",{ref:"PopoverDialog",attrs:{selectDept:e.selectDept}})],1),e._v(" "),n("el-input",{directives:[{name:"popover",rawName:"v-popover:deptPopover",arg:"deptPopover"}],attrs:{placeholder:"请输入部门",readonly:"","auto-complete":"off"},model:{value:e.form.dept_name,callback:function(t){e.$set(e.form,"dept_name",t)},expression:"form.dept_name"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"性别",prop:"gender"}},[n("el-select",{attrs:{size:"small",placeholder:"选择性别",transfer:""},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},e._l(e.genders,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"微信号",prop:"wechat"}},[n("el-input",{attrs:{placeholder:"请输入微信号"},model:{value:e.form.wechat,callback:function(t){e.$set(e.form,"wechat",t)},expression:"form.wechat"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"状态",prop:"status"}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0,"inactive-text":"禁用","active-text":"启用"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"备注",prop:"remark"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save()}}},[e._v("确定")])],1)],1)},staticRenderFns:[]};var y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"关联角色",visible:e.show,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"500px"},on:{"update:visible":function(t){e.show=t}}},[n("div",[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.dataList},on:{"selection-change":e.onSelectChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"remark",label:"备注"}})],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确定")])],1)])},staticRenderFns:[]};var $={data:function(){return{total:0,page:1,size:20,dataList:[],isShow:!1,user_id:null,form:{user_id_eq:null,name:null,phone:null,gender:null,status:null,department_id:null,wechat:null,remark:null,dept_name:null,password:null,user_id:null},rules:{password:[{required:!0,message:"请输入重置密码",trigger:"blur"},{min:6,max:20,message:"姓名长度6到20个字符",trigger:"blur"}]},loading:!1}},computed:{genders:function(){return b}},created:function(){this.refresh()},methods:{refresh:function(){var e=this;e.loading=!0;var t=g()({},e.form,{page:e.page-1,size:e.size});e.$http.post("/api/adminSysUser/queryPage",v()(t)).then(function(t){e.loading=!1,e.dataList=t.data.content,e.total=t.data.totalElements}).catch(function(t){e.$message.error("获取用户列表失败："+t),e.loading=!1})},doAdd:function(){this.$refs.dialog.addDialog()},doEdit:function(e){this.$refs.dialog.editDialog(e)},doRole:function(e){this.$refs.RoleList.showList(e)},doDelete:function(e){var t=this,n=this;this.$confirm("你确定要删除吗?","提示",{confirmbuttontext:"确定",cancelbuttontext:"取消",type:"warning"}).then(function(){n.$http.delete("/api/adminsysuser/delete",{params:{ids:[e.user_id]}}).then(function(e){t.$message.success("删除成功"),n.refresh()}).catch(function(e){n.$message.error("删除失败："+e)})}).catch(function(){})},openDialog:function(e){this.isShow=!0,this.user_id=e.user_id},changePassword:function(){var e=this,t=this;this.$refs.form.validate(function(n){n&&t.$http.post("/api/adminSysUser/updatePassword",v()(g()({},t.form,{user_id:e.user_id}))).then(function(n){t.form.password=null,t.isShow=!1,e.$message.success("重置密码成功!"),t.refresh()})})}},components:{AdminSysUserDialog:n("VU/8")(w,k,!1,function(e){n("FP0y")},null,null).exports,RoleList:n("VU/8")({data:function(){return{dataList:[],show:!1,roleIds:[],userId:null}},computed:{},created:function(){},methods:{refresh:function(e){var t=this,n=this;n.$http.post("/api/adminRole/queryList",{}).then(function(o){n.dataList=o.data,n.$http.post("/api/adminUserRole/queryList",{user_id:e}).then(function(e){e.data.map(function(e){n.dataList.map(function(n){n.id===e.role_id&&t.$refs.multipleTable.toggleRowSelection(n,!0)})})})})},onSelectChange:function(e){this.selectId=e.map(function(e){return e.id})},save:function(){var e=this,t=this,n=this.selectId.map(function(e){return{user_id:t.userId,role_id:e}});t.$http.post("/api/adminUserRole/insertBatch?user_id="+t.userId,n).then(function(t){e.show=!1,e.$message.success("授权成功")})},showList:function(e){this.userId=e.user_id,this.show=!0,this.refresh(e.user_id)}},components:{}},y,!1,function(e){n("1RTu")},null,null).exports}},D={render:function(){var e=this,t=this,n=t.$createElement,o=t._self._c||n;return o("div",[o("el-form",{attrs:{inline:!0}},[o("el-form-item",{attrs:{label:"姓名"}},[o("el-input",{attrs:{placeholder:"请输入姓名",size:"small"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"编号"}},[o("el-input",{attrs:{placeholder:"请输入编号",size:"small"},model:{value:t.form.user_id_eq,callback:function(e){t.$set(t.form,"user_id_eq",e)},expression:"form.user_id_eq"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"手机号"}},[o("el-input",{attrs:{placeholder:"请输入手机号",size:"small",maxlength:"11"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"性别"}},[o("el-select",{attrs:{size:"small",placeholder:"选择性别",transfer:""},model:{value:t.form.gender,callback:function(e){t.$set(t.form,"gender",e)},expression:"form.gender"}},[o("el-option",{attrs:{label:"全部",value:null}}),t._v(" "),t._l(t.genders,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{icon:"search",title:"根据输入的条件查询",size:"small"},on:{click:t.refresh}},[t._v("查询")]),t._v(" "),o("el-button",{attrs:{type:"primary",icon:"plus",title:"添加",size:"small"},on:{click:function(e){t.doAdd()}}},[t._v("添加")])],1)],1),t._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList,"element-loading-text":"正在加载......"}},[o("el-table-column",{attrs:{prop:"user_id",label:"编号"}}),t._v(" "),o("el-table-column",{attrs:{prop:"name",label:"姓名"}}),t._v(" "),o("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),t._v(" "),o("el-table-column",{attrs:{prop:"gender",label:"性别"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t._f("gender-filter")(e.row.gender)))])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t._f("question_enable")(e.row.status)))])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"dept_name",label:"部门名称"}}),t._v(" "),o("el-table-column",{attrs:{prop:"wechat",label:"微信号"}}),t._v(" "),o("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",[o("el-button",{attrs:{disabled:1==e.row.user_id,type:"text"},on:{click:function(n){t.doEdit(e.row)}}},[t._v("编辑")]),t._v(" "),o("el-button",{attrs:{disabled:1==e.row.user_id,type:"text"},on:{click:function(n){t.doRole(e.row)}}},[t._v("关联角色")]),t._v(" "),o("el-button",{attrs:{disabled:1==e.row.user_id,type:"text"},on:{click:function(n){t.doDelete(e.row)}}},[t._v("删除")]),t._v(" "),o("el-button",{attrs:{disabled:1==e.row.user_id,type:"text"},on:{click:function(n){t.openDialog(e.row)}}},[t._v("重置密码")])],1)]}}])})],1),t._v(" "),o("br"),t._v(" "),t.total>0?o("div",{staticStyle:{"text-align":"right"}},[o("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[10,15,20,25,30],"page-size":t.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":function(t){e.size=t,e.refresh()},"current-change":function(t){e.page=t,e.refresh()},"update:currentPage":function(e){t.page=e}}})],1):t._e(),t._v(" "),o("AdminSysUserDialog",{ref:"dialog",attrs:{refresh:t.refresh}}),t._v(" "),o("RoleList",{ref:"RoleList"}),t._v(" "),o("el-dialog",{ref:"passDialog",attrs:{title:"重置密码",visible:t.isShow,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"500px"},on:{"update:visible":function(e){t.isShow=e}}},[o("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"密码",prop:"password"}},[o("el-input",{staticStyle:{width:"75%"},attrs:{placeholder:"请输入密码",maxlength:"20"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1),t._v(" "),o("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.isShow=!1}}},[t._v("取消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.changePassword()}}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]};var S=n("VU/8")($,D,!1,function(e){n("V5V4")},null,null).exports,F={props:["refresh"],data:function(){return{title:"",form:this.initForm(),dialogMode:"save",show:!1,rules:{name:[{required:!0,message:"请输入部门名称",trigger:"blur"},{min:2,max:10,message:"部门名称2到10个字符",trigger:"blur"}]}}},methods:{save:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$http.post("/api/adminDept/validate",v()({dept_id:e.form.dept_id,name:e.form.name})).then(function(t){!0===t.data.success?e.$http.post("/api/adminDept/"+e.dialogMode,v()(e.form)).then(function(t){e.show=!1,e.$message.success(e.title+"成功!"),e.refresh()}):1===t.data.code&&e.$message.error(t.data.errorMsg)})})},initForm:function(){return{dept_id:null,parent_id:null,name:null,enable:1,remark:null,parent_name:null}},addDialog:function(e){this.title="新增部门",this.dialogMode="save",this.form=this.initForm(),this.form.parent_id=e.dept_id,this.show=!0,this.form.parent_name=e.name},editDialog:function(e){this.title="修改部门",this.dialogMode="update",this.form=g()({},e),this.show=!0,this.form.parent_name=e.parent_name}},components:{}},R={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,visible:e.show,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"500px"},on:{"update:visible":function(t){e.show=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"上级部门"}},[e._v(e._s(e.form.parent_name))]),e._v(" "),n("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入部门名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"可用标志"}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0,"inactive-text":"禁用","active-text":"启用"},model:{value:e.form.enable,callback:function(t){e.$set(e.form,"enable",t)},expression:"form.enable"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"备注"}},[n("el-input",{attrs:{placeholder:"请输入备注",type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save()}}},[e._v("确定")]),e._v(" "),n("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var L={data:function(){return{menus:[],ids:[],form:{dept_id:null,branch_id:null,parent_id:null,name:null,enable:null,remark:null},loading:!1}},computed:{},created:function(){this.refresh()},methods:{refresh:function(){var e=this;e.loading=!0,e.$http.post("/api/adminDept/queryList",{}).then(function(t){e.loading=!1,e.menus=t.data,e.total=t.data.totalElements}).catch(function(t){e.$message.error("获取部门数据失败："+t),e.loading=!1})},doAdd:function(e){this.$refs.dialog.addDialog(e)},doEdit:function(e,t){console.log(e),this.$refs.dialog.editDialog(t)},doDelete:function(e,t){var n=this,o=this;t.children.length>0?o.$message.error("请先删除子结点!"):this.$confirm("你确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.$http.delete("/api/adminDept/delete",{params:{ids:[t.dept_id]}}).then(function(e){n.$message.success("删除成功"),o.refresh()}).catch(function(e){o.$message.error("删除失败："+e)})})}},components:{AdminDeptDialog:n("VU/8")(F,R,!1,function(e){n("Xj2M")},null,null).exports}},z={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{attrs:{type:"primary"},on:{click:e.refresh}},[e._v("刷新")]),e._v(" "),n("hr"),e._v(" "),n("div",{staticStyle:{height:"500px",overflow:"auto",width:"450px"}},[n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.menus,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"element-loading-text":"正在加载......"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,r=t.data;return n("span",{staticClass:"custom-tree-node"},[e._v(e._s(r.name)+"\n        "),n("span",{staticStyle:{"margin-left":"30px"}},[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.doAdd(r)}}},[e._v("添加子部门")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.doEdit(o,r)}}},[e._v("修改")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"mini",disabled:0==r.parent_id},on:{click:function(){return e.doDelete(o,r)}}},[e._v("删除")])],1)])}}])})],1),e._v(" "),n("hr"),e._v(" "),n("AdminDeptDialog",{ref:"dialog",attrs:{refresh:e.refresh}})],1)},staticRenderFns:[]};var q=n("VU/8")(L,z,!1,function(e){n("RiJI")},null,null).exports,T={props:["refresh"],data:function(){return{title:"",form:this.initForm(),dialogMode:"save",show:!1,rules:{icon:[{required:!0,message:"请输入图标",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:10,message:"名称长度为2到10个字符",trigger:"blur"}],tip:[{required:!0,message:"请输入提示信息",trigger:"blur"},{min:2,max:10,message:"提示信息为2到10个字符",trigger:"blur"}],status:[{required:!0,message:"请输入状态",trigger:"blur"}],order_num:[{required:!0,message:"请输入排序编号",trigger:"blur"}]}}},methods:{save:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$http.post("/api/adminFunc/validate",v()({func_id:e.form.func_id,name:e.form.name})).then(function(t){!0===t.data.success?e.$http.post("/api/adminFunc/"+e.dialogMode,v()(e.form)).then(function(t){e.show=!1,e.$message.success(e.title+"成功!"),e.refresh()}):1===t.data.code&&e.$message.error(t.data.errorMsg)})})},initForm:function(){return{func_id:null,type:1,color:null,icon:null,name:null,parent_id:null,tip:null,remark:null,status:1,url:null,order_num:null}},addDialog:function(e){this.title="新增菜单",this.dialogMode="save",this.form=this.initForm(),this.form.parent_id=e,this.show=!0},editDialog:function(e){this.title="修改菜单",this.dialogMode="update",this.form=g()({},e),this.show=!0}},components:{}},E={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,visible:e.show,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"800px"},on:{"update:visible":function(t){e.show=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"地址"}},[n("el-input",{attrs:{placeholder:"请输入地址"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"状态",prop:"status"}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0,"inactive-text":"禁用","active-text":"启用"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"图标",prop:"icon"}},[n("el-input",{attrs:{placeholder:"请输入图标"},model:{value:e.form.icon,callback:function(t){e.$set(e.form,"icon",t)},expression:"form.icon"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"提示信息",prop:"tip"}},[n("el-input",{attrs:{placeholder:"请输入提示信息"},model:{value:e.form.tip,callback:function(t){e.$set(e.form,"tip",t)},expression:"form.tip"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"排序编号",prop:"order_num"}},[n("el-input",{attrs:{placeholder:"请输入排序编号"},model:{value:e.form.order_num,callback:function(t){e.$set(e.form,"order_num",t)},expression:"form.order_num"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"类型",prop:"type"}},[n("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[n("el-option",{attrs:{value:1,label:"菜单"}}),e._v(" "),n("el-option",{attrs:{value:2,label:"按钮"}})],1)],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"颜色"}},[n("el-input",{attrs:{placeholder:"请输入颜色"},model:{value:e.form.color,callback:function(t){e.$set(e.form,"color",t)},expression:"form.color"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"备注"}},[n("el-input",{attrs:{placeholder:"请输入备注",type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save()}}},[e._v("确定")]),e._v(" "),n("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var M={data:function(){return{total:0,page:1,size:20,dataList:[],form:{func_id:null,type:null,color:null,icon:null,name:null,parent_id:null,tip:null,remark:null,status:null,url:null,order_num:null},loading:!1}},computed:{},created:function(){this.refresh()},methods:{refresh:function(){var e=this;e.loading=!0,e.$http.post("/api/adminFunc/queryList",{}).then(function(t){e.loading=!1,e.dataList=t.data}).catch(function(t){e.$message.error("获取菜单列表失败："+t),e.loading=!1})},doAdd:function(e){this.$refs.dialog.addDialog(e.func_id)},doEdit:function(e){this.$refs.dialog.editDialog(e)},doDelete:function(e,t){var n=this,o=this;t.children.length>0?o.$message.error("请先删除子结点!"):this.$confirm("你确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.$http.delete("/api/adminFunc/delete",{params:{ids:[t.func_id]}}).then(function(e){n.$message.success("删除成功"),o.refresh()}).catch(function(e){o.$message.error("删除失败："+e)})}).catch(function(){})}},components:{AdminFuncDialog:n("VU/8")(T,E,!1,function(e){n("EHB6")},null,null).exports}},U={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{attrs:{type:"primary"},on:{click:e.refresh}},[e._v("刷新")]),e._v(" "),n("hr"),e._v(" "),n("div",{staticStyle:{overflow:"auto",height:"600px",width:"450px"}},[n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.dataList,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"element-loading-text":"正在加载......"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.node,r=t.data;return n("span",{staticClass:"custom-tree-node"},[e._v("\n        "+e._s(r.name)+"\n        "),n("span",{staticStyle:{"margin-left":"30px"}},[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.doAdd(r)}}},[e._v("添加子菜单")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.doEdit(r)}}},[e._v("修改")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"mini",disabled:0==r.parent_id},on:{click:function(){return e.doDelete(o,r)}}},[e._v("删除")])],1)])}}])})],1),e._v(" "),n("hr"),e._v(" "),n("AdminFuncDialog",{ref:"dialog",attrs:{refresh:e.refresh}})],1)},staticRenderFns:[]};var A=n("VU/8")(M,U,!1,function(e){n("wYXx")},null,null).exports,V={props:["refresh"],data:function(){return{title:"",form:this.initForm(),dialogMode:"save",show:!1,rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:10,message:"名称长度为2到10个字符",trigger:"blur"}]}}},methods:{save:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$http.post("/api/adminRole/validateName",v()({id:e.form.id,name:e.form.name})).then(function(t){!0===t.data.success?e.$http.post("/api/adminRole/"+e.dialogMode,v()(e.form)).then(function(t){e.show=!1,e.$message.success(e.title+"成功!"),e.refresh()}):1===t.data.code&&e.$message.error(t.data.errorMsg)})})},initForm:function(){return{id:null,name:null,remark:null}},addDialog:function(){this.title="新增角色",this.dialogMode="save",this.form=this.initForm(),this.show=!0},editDialog:function(e){this.title="修改角色",this.dialogMode="update",this.form=g()({},e),this.show=!0}},components:{}},B={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,visible:e.show,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"500px"},on:{"update:visible":function(t){e.show=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[n("el-row",[n("el-col",[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"备注",prop:"remark"}},[n("el-input",{attrs:{placeholder:"请输入备注",type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save()}}},[e._v("确定")])],1)],1)},staticRenderFns:[]};var P={data:function(){return{func_ids:[],role_name:null,role_id:null,dataList:[],show:!1,rules:{}}},methods:{refresh:function(e){var t=this,n=this;g()({},n.form,{page:n.page-1,size:n.size});n.$http.post("/api/adminFunc/queryList",{}).then(function(o){n.dataList=o.data,n.$http.post("/api/adminRoleFunc/queryList",{role_id:e}).then(function(e){t.$refs.tree.setCheckedKeys(e.data.map(function(e){return e.user_id}))})})},save:function(){var e=this,t=this,n=this.func_ids.map(function(e){return{role_id:t.role_id,user_id:e}});t.$http.post("/api/adminRoleFunc/insertBatch?role_id="+t.role_id,n).then(function(t){e.show=!1,e.$message.success("授权成功")})},addDialog:function(e){this.role_id=e.id,this.role_name=e.name,this.show=!0,this.refresh(e.id)},changeSelect:function(e,t){this.func_ids=t.checkedNodes.map(function(e){return e.func_id})}}},C={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"功能权限",visible:e.show,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"500px"},on:{"update:visible":function(t){e.show=t}}},[n("p",[e._v("当前角色："+e._s(this.role_name))]),e._v(" "),n("div",{staticStyle:{height:"500px",overflow:"auto"}},[n("el-tree",{ref:"tree",attrs:{data:e.dataList,"show-checkbox":"","node-key":"func_id","default-expand-all":"","expand-on-click-node":!1},on:{check:e.changeSelect},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var o=t.data;return n("span",{staticClass:"custom-tree-node"},[e._v(e._s(o.name))])}}])})],1),e._v(" "),n("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save()}}},[e._v("确定")])],1)])},staticRenderFns:[]};var I={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,visible:e.show,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"500px"},on:{"update:visible":function(t){e.show=t}}},[n("p",[e._v("当前角色："+e._s(this.role_name))]),e._v(" "),n("div",{staticStyle:{height:"500px",overflow:"auto"}},[n("el-tree",{ref:"tree",attrs:{data:e.dataList,"show-checkbox":"","node-key":"dept_id","default-expand-all":"","expand-on-click-node":!1},on:{check:e.changeTree},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var o=t.data;return n("span",{staticClass:"custom-tree-node"},[e._v(e._s(o.name))])}}])})],1),e._v(" "),n("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save()}}},[e._v("确定")])],1)])},staticRenderFns:[]};var N={data:function(){return{total:0,page:1,size:20,dataList:[],form:{id:null,name:null,remark:null},loading:!1}},computed:{},created:function(){this.refresh()},methods:{refresh:function(){var e=this;e.loading=!0;var t=g()({},e.form,{page:e.page-1,size:e.size});e.$http.post("/api/adminRole/queryPage",v()(t)).then(function(t){e.loading=!1,e.dataList=t.data.content,e.total=t.data.totalElements}).catch(function(t){e.$message.error("获取角色列表失败："+t),e.loading=!1})},doAdd:function(){this.$refs.dialog.addDialog()},doEdit:function(e){this.$refs.dialog.editDialog(e)},doDelete:function(e){var t=this,n=this;this.$confirm("你确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.$http.delete("/api/adminRole/delete",{params:{ids:[e.id]}}).then(function(e){t.$message.success("删除成功"),n.refresh()}).catch(function(e){n.$message.error("删除失败："+e)})}).catch(function(){})},doChangeFunc:function(e){this.$refs.funcList.addDialog(e)},doOpenDeptTree:function(e){this.$refs.deptTree.addDialog(e)}},components:{AdminRoleDialog:n("VU/8")(V,B,!1,function(e){n("VbaZ")},null,null).exports,FunList:n("VU/8")(P,C,!1,function(e){n("uT8H")},null,null).exports,DeptTree:n("VU/8")({data:function(){return{dept_ids:[],role_name:null,role_id:null,dataList:[],title:"",show:!1}},created:function(){},methods:{refresh:function(e){var t=this,n=this;n.$http.post("/api/adminDept/queryList",{}).then(function(o){n.dataList=o.data,n.$http.post("api/adminRoleDept/queryList",{role_id:e}).then(function(e){t.$refs.tree.setCheckedKeys(e.data.map(function(e){return e.dept_id}))})}).catch(function(e){n.$message.error("获取菜单列表失败："+e)})},save:function(){var e=this,t=this,n=[];this.dept_ids.map(function(e){return n.push({role_id:t.role_id,dept_id:e})}),t.$http.post("/api/adminRoleDept/insertBatch?role_id="+t.role_id,n).then(function(t){e.show=!1,e.$message.success("授权成功")})},addDialog:function(e){this.title="数据权限",this.role_id=e.id,this.role_name=e.name,this.show=!0,this.refresh(e.id)},changeTree:function(e,t){this.dept_ids=t.checkedNodes.map(function(e){return e.dept_id})}},components:{}},I,!1,function(e){n("Odol")},null,null).exports}},H={render:function(){var e=this,t=this,n=t.$createElement,o=t._self._c||n;return o("div",[o("el-form",{attrs:{inline:!0}},[o("el-form-item",{attrs:{label:"名称"}},[o("el-input",{attrs:{placeholder:"请输入名称",size:"small"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"备注"}},[o("el-input",{attrs:{placeholder:"请输入备注",size:"small"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{icon:"search",title:"根据输入的条件查询",size:"small"},on:{click:t.refresh}},[t._v("查询")]),t._v(" "),o("el-button",{attrs:{type:"primary",icon:"plus",title:"添加",size:"small"},on:{click:function(e){t.doAdd()}}},[t._v("添加")])],1)],1),t._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList,"element-loading-text":"正在加载......",border:"1"}},[o("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),o("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",[o("el-button",{attrs:{type:"text"},on:{click:function(n){t.doEdit(e.row)}}},[t._v("编辑")]),t._v(" "),o("el-button",{attrs:{type:"text"},on:{click:function(n){t.doDelete(e.row)}}},[t._v("删除")]),t._v(" "),o("el-button",{attrs:{type:"text"},on:{click:function(n){t.doChangeFunc(e.row)}}},[t._v("功能权限")]),t._v(" "),o("el-button",{attrs:{type:"text"},on:{click:function(n){t.doOpenDeptTree(e.row)}}},[t._v("数据授权")])],1)]}}])})],1),t._v(" "),o("br"),t._v(" "),t.total>0?o("div",{staticStyle:{"text-align":"right"}},[o("el-pagination",{attrs:{total:t.total,"current-page":t.page,"page-sizes":[10,15,20,25,30],"page-size":t.size,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":function(t){e.size=t,e.refresh()},"current-change":function(t){e.page=t,e.refresh()},"update:currentPage":function(e){t.page=e}}})],1):t._e(),t._v(" "),o("AdminRoleDialog",{ref:"dialog",attrs:{refresh:t.refresh}}),t._v(" "),o("FunList",{ref:"funcList"}),t._v(" "),o("DeptTree",{ref:"deptTree"})],1)},staticRenderFns:[]};var j=n("VU/8")(N,H,!1,function(e){n("AGk4")},null,null).exports;r.default.use(l.a),r.default.use(p.a);var O=new l.a({routes:[{path:"/",name:"MenuTree",component:m,redirect:"/MenuTree",children:[{path:"adminSysUser",component:S,name:"用户管理"},{path:"adminDept",component:q,name:"部门"},{path:"adminRole",component:j,name:"角色管理"},{path:"adminMenu",component:A,name:"菜单管理"}]}]}),X=n("//Fk"),J=n.n(X),G=n("mtWM"),K=n.n(G);K.a.defaults.headers.post["Content-Type"]="application/json";var W=K.a.create({validateStatus:function(e){return 200==e||400==e}});W.interceptors.response.use(function(e){return 400==e.status&&(f.Message.error(e.data.error),e.data=null),e},function(e){return"Network Error"===e.message&&f.MessageBox.alert("回话过期，请重新登录","提示",{confirmButtonText:"确定",callback:function(){window.location.href="/"}}),J.a.reject(e)});var Y=W;n("tvR6");r.default.config.productionTip=!0,r.default.$http=Y,r.default.prototype.$http=Y,new r.default({el:"#app",router:O,components:{App:i},template:"<App/>"})},Odol:function(e,t){},RiJI:function(e,t){},V5V4:function(e,t){},VbaZ:function(e,t){},Xj2M:function(e,t){},gvT3:function(e,t){},tvR6:function(e,t){},uT8H:function(e,t){},wYXx:function(e,t){}},["NHnr"]);